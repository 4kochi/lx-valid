/*!
 * lx-valid - v0.5.4 - 2015-06-25
 * https://github.com/litixsoft/lx-valid
 *
 * Copyright (c) 2015 Litixsoft GmbH
 * Licensed MIT
 */


!function(a){"use strict";function b(a){if(null===a)return"null";if(a&&(1===a.nodeType||9===a.nodeType))return"element";var b=Object.prototype.toString.call(a),c=b.match(/\[object (.*?)\]/)[1].toLowerCase();if("number"===c){if(isNaN(a))return"nan";if(!isFinite(a))return"infinity"}return c}function c(a,b,d){d=e({},c.defaults,d),d.trim===!0&&(String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}));var h=[];return b.items?g(a,a,"",b,d,h):f(a,b,d,h),{valid:!h.length,errors:h}}function d(a){var b=c.types[a];return b||(b=c.types[a.toLowerCase()]),b}function e(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError("mixin non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a}function f(a,b,c,d){var e,f,h=Object.keys(a),j=[];if(b.properties){e=b.properties;for(f in e)e.hasOwnProperty(f)&&(j.push(f),g(a,a[f],f,e[f],c,d))}if(b.patternProperties){e=b.patternProperties;for(f in e)if(e.hasOwnProperty(f)){var k=new RegExp(f);for(var l in a)a.hasOwnProperty(l)&&null!==k.exec(l)&&(g(a,a[l],l,e[f],c,d),j.push(l))}}if(c.deleteUnknownProperties)for(f in a)a.hasOwnProperty(f)&&-1===j.indexOf(f)&&delete a[f];if(c.unknownProperties)for(f in a)a.hasOwnProperty(f)&&-1===j.indexOf(f)&&("delete"===c.unknownProperties?delete a[f]:"error"===c.unknownProperties&&i("unknown",f,a[f],b,d));if(void 0!==b.additionalProperties){var m,n,o=h.filter(function(a){return-1===j.indexOf(a)});if(b.additionalProperties===!1&&o.length>0)for(m=0,n=o.length;n>m;m++)i("additionalProperties",o[m],a[o[m]],!1,d);else if("object"==typeof b.additionalProperties&&o.length>0)for(m=0,n=o.length;n>m;m++)g(a,a[o[m]],o[m],b.unvisitedProperties,c,d)}}function g(a,d,e,k,l,m){function n(b,c,d){void 0===k[b]||d(c,k[b],a)||i(b,e,c,k,m)}var o,p,q,r,s;if(!l.ignoreNullValues||null!==d){if("string"==typeof d&&l.strictRequired===!0&&k.required){var t=l.trim===!0?d.trim():d;if(""===t)return i("required",e,void 0,k,m)}if(void 0===d){if(void 0===k["default"]||!l.addMissingDefaults)return k.required&&"any"!==k.type?i("required",e,void 0,k,m):void n("conform",d,function(a,b,c){return b(a,c)});"function"==typeof k["default"]?a[e]=d=k["default"]():a[e]=d=k["default"],n("conform",d,function(a,b,c){return b(a,c)})}if(l.cast&&(("integer"===k.type||"number"===k.type||"float"===k.type)&&(null===d||"boolean"==typeof d||isNaN(+d)||(d=+d,a[e]=d)),"boolean"===k.type&&(("true"===d||"1"===d||1===d)&&(d=!0,a[e]=d),("false"===d||"0"===d||0===d)&&(d=!1,a[e]=d))),k.format&&l.validateFormats&&"string"==typeof d){var u=j(k.format)?k.format:[k.format];for(p=!1,r=0,s=u.length;s>r;r++)if(o=u[r].toLowerCase().trim(),l.validateFormatExtensions&&(q=c.formatExtensions[o]),q||(q=c.formats[o]),q){if(q.test(d)){if(l.convert&&"function"==typeof l.convert)if(j(a[e])||j(a)){var v=j(a)?a:a[e],w=v.indexOf(d);v[w]=l.convert(o,d)}else a[e]=l.convert(o,d);p=!0;break}p=!1}else if(l.validateFormatsStrict){p=!1;break}if(!p)return i("format",e,d,k,m)}if(k["enum"])if("array"===k.type&&j(d)){for(r=0;r<d.length;r++)if(-1===k["enum"].indexOf(d[r])){i("enum",e,d,k,m);break}}else-1===k["enum"].indexOf(d)&&i("enum",e,d,k,m);if("string"==typeof k.dependencies&&void 0===a[k.dependencies]&&i("dependencies",e,null,k,m),j(k.dependencies))for(r=0,s=k.dependencies.length;s>r;r++)void 0===a[k.dependencies[r]]&&i("dependencies",e,null,k,m);"object"==typeof k.dependencies&&f(a,k.dependencies,l,m),h(d,k.type,function(c,h){if(c)return i("type",e,b(d),k,m);switch(n("conform",d,function(a,b,c){return b(a,c)}),h||(j(d)?"array":typeof d)){case"string":if(l.trim===!0)if(j(a[e])){var o=a[e].indexOf(d);"string"==typeof a[e][o]&&(a[e][o]=d.trim())}else"string"==typeof a[e]&&(a[e]=d.trim());n("minLength",d.length,function(a,b){return a>=b}),n("maxLength",d.length,function(a,b){return b>=a}),n("pattern",d,function(a,b){return b="string"==typeof b?b=new RegExp(b):b,b.test(a)});break;case"integer":case"number":n("minimum",d,function(a,b){return a>=b}),n("maximum",d,function(a,b){return b>=a}),n("exclusiveMinimum",d,function(a,b){return a>b}),n("exclusiveMaximum",d,function(a,b){return b>a}),n("divisibleBy",d,function(a,b){var c=Math.max((a-Math.floor(a)).toString().length-2,(b-Math.floor(b)).toString().length-2);return c=c>0?Math.pow(10,c):1,a*c%(b*c)===0});break;case"array":n("items",d,function(b,c){for(var f,h=0,i=b.length;i>h;h++)f=[],g(a,b[h],e,c,l,f),f.forEach(function(a){j(d)&&a.property===e?a.property=(e?e+".":"")+h:a.property=(e?e+".":"")+h+(a.property?"."+a.property.replace(e+".",""):"")}),f.unshift(m.length,0),Array.prototype.splice.apply(m,f);return!0}),n("minItems",d,function(a,b){return a.length>=b}),n("maxItems",d,function(a,b){return a.length<=b}),n("uniqueItems",d,function(a,b){if(!b)return!0;for(var c={},d=0,e=a.length;e>d;d++){var f=JSON.stringify(a[d]);if(c[f])return!1;c[f]=!0}return!0});break;case"object":if(k.properties||k.patternProperties||k.additionalProperties){var p=[];f(d,k,l,p),p.forEach(function(a){a.property=e+"."+a.property}),p.unshift(m.length,0),Array.prototype.splice.apply(m,p)}}l.transform&&"function"==typeof l.transform&&l.transform({object:a,value:d,property:e,schema:k,options:l,errors:m})})}}function h(a,b,c){var e=j(b)?b:[b];if(void 0===b)return c(null,b);for(var f=0,g=e.length;g>f;f++){b=e[f].trim();var h=d(b);if(!h)return c(!0);if(h(a))return c(null,b)}c(!0)}function i(a,b,d,e,f){var g={expected:e[a],actual:d,attribute:a,property:b},h=e.messages&&e.messages[a]||e.message||c.messages[a]||"no default message";h=h.replace(/%\{([a-z]+)\}/gi,function(a,b){return g[b.toLowerCase()]||""}),f.push({attribute:a,property:b,expected:e[a],actual:d,message:h})}function j(a){var b=typeof a;return"object"===b&&a&&"number"==typeof a.length&&!a.propertyIsEnumerable("length")&&"function"==typeof a.splice?!0:!1}c.defaults={validateFormats:!0,validateFormatsStrict:!1,validateFormatExtensions:!0,addMissingDefaults:!1,unknownProperties:"ignore",trim:!1,strictRequired:!1,ignoreNullValues:!1,transform:null},c.messages={required:"is required",minLength:"is too short (minimum is %{expected} characters)",maxLength:"is too long (maximum is %{expected} characters)",pattern:"invalid input",minimum:"must be greater than or equal to %{expected}",maximum:"must be less than or equal to %{expected}",exclusiveMinimum:"must be greater than %{expected}",exclusiveMaximum:"must be less than %{expected}",divisibleBy:"must be divisible by %{expected}",minItems:"must contain more than %{expected} items",maxItems:"must contain less than %{expected} items",uniqueItems:"must hold a unique set of values",format:"is not a valid %{expected}",conform:"must conform to given constraint",type:"must be of %{expected} type",additionalProperties:"must not exist",unknown:"is not defined in schema"},c.messages["enum"]="must be present in given enumerator",c.formats={email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,"ip-address":/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,ipv6:/^([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4}$/,"date-time":/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:.\d{1,3})?Z$/,date:/^\d{4}-\d{2}-\d{2}$/,time:/^\d{2}:\d{2}:\d{2}$/,color:/^#[a-z0-9]{6}|#[a-z0-9]{3}|(?:rgb\(\s*(?:[+-]?\d+%?)\s*,\s*(?:[+-]?\d+%?)\s*,\s*(?:[+-]?\d+%?)\s*\))aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow$/i,"host-name":/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])/,"utc-millisec":{test:function(a){return"number"==typeof a&&a>=0}},regex:{test:function(a){try{new RegExp(a)}catch(b){return!1}return!0}},"mongo-id":/^[0-9a-fA-F]{8}[0-9a-fA-F]{6}[0-9a-fA-F]{4}[0-9a-fA-F]{6}$/,uuid:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,"number-float":/^[\-\+]?\b(\d+[.]\d+$)$/,"float":/^[\-\+]?\b(\d+[.]\d+$)$/,integer:/^[\-\+]?[0-9]+$/,empty:/^$/},c.formatExtensions={url:/^(https?|ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},c.types={string:function(a){return"string"===b(a)},number:function(a){return"number"===b(a)},"boolean":function(a){return"boolean"===b(a)},date:function(a){return"date"===b(a)},regexp:function(a){return"regexp"===b(a)},array:function(a){return"array"===b(a)},object:function(a){return"object"===b(a)},integer:function(a){return"number"===b(a)&&Math.floor(a)===a},"float":function(a){return"number"===b(a)&&new RegExp(c.formats["float"]).exec(a)},"null":function(a){return"null"===b(a)},undefined:function(a){return"undefined"===b(a)},any:function(a){return void 0!==a},mongoId:function(a){return a&&"object"==typeof a&&"ObjectID"===a._bsontype&&c.formats["mongo-id"].test(a)}},a.validate=c,a.mixin=e}("undefined"==typeof window?module.exports:window.json=window.json||{}),function(){function a(){}function b(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(this,arguments)}}function c(a){var b=!1;return function(){b||(b=!0,a.apply(this,arguments))}}function d(a){return I(a)||"number"==typeof a.length&&a.length>=0&&a.length%1===0}function e(a,b){return d(a)?f(a,b):j(a,b)}function f(a,b){for(var c=-1,d=a.length;++c<d;)b(a[c],c,a)}function g(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function h(a){return g(Array(a),function(a,b){return b})}function i(a,b,c){return f(a,function(a,d,e){c=b(c,a,d,e)}),c}function j(a,b){f(J(a),function(c){b(a[c],c)})}function k(a){var b,c,e=-1;return d(a)?(b=a.length,function(){return e++,b>e?e:null}):(c=J(a),b=c.length,function(){return e++,b>e?c[e]:null})}function l(a,b){b=b||0;var c=-1,d=a.length;b&&(d-=b,d=0>d?0:d);for(var e=Array(d);++c<d;)e[c]=a[c+b];return e}function m(a){return function(b,c,d){return a(b,d)}}function n(d){return function(e,f,g){g=c(g||a),e=e||[];var h=k(e);if(0>=d)return g(null);var i=!1,j=0,l=!1;!function m(){if(i&&0>=j)return g(null);for(;d>j&&!l;){var a=h();if(null===a)return i=!0,void(0>=j&&g(null));j+=1,f(e[a],a,b(function(a){j-=1,a?(g(a),l=!0):m()}))}}()}}function o(a){return function(b,c,d){return a(F.eachOf,b,c,d)}}function p(a,b){return function(c,d,e){return b(n(a),c,d,e)}}function q(a){return function(b,c,d){return a(F.eachOfSeries,b,c,d)}}function r(b,d,e,f){f=c(f||a);var g=[];b(d,function(a,b,c){e(a,function(a,d){g[b]=d,c(a)})},function(a){f(a,g)})}function s(a){return p(a,r)}function t(a,b,c,d){var e=[];b=g(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b,d){c(a.value,function(b){b&&e.push(a),d()})},function(){d(g(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})}function u(a,b,c,d){var e=[];b=g(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b,d){c(a.value,function(b){b||e.push(a),d()})},function(){d(g(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})}function v(b,c,d,e){b(c,function(b,c,f){d(b,function(c){c?(e(b),e=a):f()})},function(){e()})}function w(b,c,e){e=e||a;var f=d(c)?[]:{};b(c,function(a,b,c){a(function(a){var d=l(arguments,1);d.length<=1&&(d=d[0]),f[b]=d,c(a)})},function(a){e(a,f)})}function x(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(a,b){e=e.concat(b||[]),d(a)})},function(a){d(a,e)})}function y(c,d,e){function h(b,c,d,e){if(null!=e&&"function"!=typeof e)throw new Error("task callback must be a function");return b.started=!0,I(c)||(c=[c]),0===c.length&&b.idle()?F.setImmediate(function(){b.drain()}):(f(c,function(c){var f={data:c,callback:e||a};d?b.tasks.unshift(f):b.tasks.push(f),b.tasks.length===b.concurrency&&b.saturated()}),void F.setImmediate(b.process))}function i(a,b){return function(){j-=1;var c=arguments;f(b,function(a){a.callback.apply(a,c)}),a.tasks.length+j===0&&a.drain(),a.process()}}if(null==d)d=1;else if(0===d)throw new Error("Concurrency must not be zero");var j=0,k={tasks:[],concurrency:d,saturated:a,empty:a,drain:a,started:!1,paused:!1,push:function(a,b){h(k,a,!1,b)},kill:function(){k.drain=a,k.tasks=[]},unshift:function(a,b){h(k,a,!0,b)},process:function(){if(!k.paused&&j<k.concurrency&&k.tasks.length)for(;j<k.concurrency&&k.tasks.length;){var a=e?k.tasks.splice(0,e):k.tasks.splice(0,k.tasks.length),d=g(a,function(a){return a.data});0===k.tasks.length&&k.empty(),j+=1;var f=b(i(k,a));c(d,f)}},length:function(){return k.tasks.length},running:function(){return j},idle:function(){return k.tasks.length+j===0},pause:function(){k.paused=!0},resume:function(){if(k.paused!==!1){k.paused=!1;for(var a=Math.min(k.concurrency,k.tasks.length),b=1;a>=b;b++)F.setImmediate(k.process)}}};return k}function z(a){return function(b){var c=l(arguments,1);b.apply(null,c.concat([function(b){var c=l(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&f(c,function(b){console[a](b)}))}]))}}function A(a){return function(b,c,d){a(h(b),c,d)}}function B(a,b){function c(){var c=this,d=l(arguments),e=d.pop();return a(b,function(a,b,e){a.apply(c,d.concat([e]))},e)}if(arguments.length>2){var d=l(arguments,2);return c.apply(this,d)}return c}function C(a){return function(){var b=l(arguments),c=b.pop();b.push(function(){var a=arguments;d?F.setImmediate(function(){c.apply(null,a)}):c.apply(null,a)});var d=!0;a.apply(this,b),d=!1}}var D,E,F={};D="object"==typeof window&&this===window?window:"object"==typeof global&&this===global?global:this,null!=D&&(E=D.async),F.noConflict=function(){return D.async=E,F};var G,H=Object.prototype.toString,I=Array.isArray||function(a){return"[object Array]"===H.call(a)},J=Object.keys||function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};"function"==typeof setImmediate&&(G=setImmediate),"undefined"!=typeof process&&process.nextTick?(F.nextTick=process.nextTick,G?F.setImmediate=function(a){G(a)}:F.setImmediate=F.nextTick):G?(F.nextTick=function(a){G(a)},F.setImmediate=F.nextTick):(F.nextTick=function(a){setTimeout(a,0)},F.setImmediate=F.nextTick),F.forEach=F.each=function(a,b,c){return F.eachOf(a,m(b),c)},F.forEachSeries=F.eachSeries=function(a,b,c){return F.eachOfSeries(a,m(b),c)},F.forEachLimit=F.eachLimit=function(a,b,c,d){return n(b)(a,m(c),d)},F.forEachOf=F.eachOf=function(f,g,h){function i(a){a?h(a):(k+=1,k>=j&&h(null))}h=c(h||a),f=f||[];var j=d(f)?f.length:J(f).length,k=0;return j?void e(f,function(a,c){g(f[c],c,b(i))}):h(null)},F.forEachOfSeries=F.eachOfSeries=function(d,e,f){function g(){var a=!0;return null===i?f(null):(e(d[i],i,b(function(b){if(b)f(b);else{if(i=h(),null===i)return f(null);a?F.nextTick(g):g()}})),void(a=!1))}f=c(f||a),d=d||[];var h=k(d),i=h();g()},F.forEachOfLimit=F.eachOfLimit=function(a,b,c,d){n(b)(a,c,d)},F.map=o(r),F.mapSeries=q(r),F.mapLimit=function(a,b,c,d){return s(b)(a,c,d)},F.inject=F.foldl=F.reduce=function(a,b,c,d){F.eachOfSeries(a,function(a,d,e){c(b,a,function(a,c){b=c,e(a)})},function(a){d(a||null,b)})},F.foldr=F.reduceRight=function(a,b,c,d){var e=g(a,function(a){return a}).reverse();F.reduce(e,b,c,d)},F.select=F.filter=o(t),F.selectSeries=F.filterSeries=q(t),F.reject=o(u),F.rejectSeries=q(u),F.detect=o(v),F.detectSeries=q(v),F.any=F.some=function(b,c,d){F.eachOf(b,function(b,e,f){c(b,function(b){b&&(d(!0),d=a),f()})},function(){d(!1)})},F.all=F.every=function(b,c,d){F.eachOf(b,function(b,e,f){c(b,function(b){b||(d(!1),d=a),f()})},function(){d(!0)})},F.sortBy=function(a,b,c){function d(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0}F.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){return a?c(a):void c(null,g(b.sort(d),function(a){return a.value}))})},F.auto=function(b,d){function e(a){n.unshift(a)}function g(a){for(var b=0;b<n.length;b+=1)if(n[b]===a)return void n.splice(b,1)}function h(){k--,f(n.slice(0),function(a){a()})}d=c(d||a);var j=J(b),k=j.length;if(!k)return d(null);var m={},n=[];e(function(){k||d(null,m)}),f(j,function(a){function c(b){var c=l(arguments,1);if(c.length<=1&&(c=c[0]),b){var e={};f(J(m),function(a){e[a]=m[a]}),e[a]=c,d(b,e)}else m[a]=c,F.setImmediate(h)}function j(){return i(p,function(a,b){return a&&m.hasOwnProperty(b)},!0)&&!m.hasOwnProperty(a)}function k(){j()&&(g(k),o[o.length-1](c,m))}for(var n,o=I(b[a])?b[a]:[b[a]],p=o.slice(0,Math.abs(o.length-1))||[],q=p.length;q--;){if(!(n=b[p[q]]))throw new Error("Has inexistant dependency");if(I(n)&&~n.indexOf(a))throw new Error("Has cyclic dependencies")}j()?o[o.length-1](c,m):e(k)})},F.retry=function(a,b,c){function d(d,e){function g(a,b){return function(c){a(function(a,d){c(!a||b,{err:a,result:d})},e)}}for(;a;)f.push(g(b,!(a-=1)));F.series(f,function(a,b){b=b[b.length-1],(d||c)(b.err,b.result)})}var e=5,f=[];return"function"==typeof a&&(c=b,b=a,a=e),a=parseInt(a,10)||e,c?d():d},F.waterfall=function(b,d){function e(a){return function(b){if(b)d.apply(null,arguments);else{var c=l(arguments,1),f=a.next();f?c.push(e(f)):c.push(d),C(a).apply(null,c)}}}if(d=c(d||a),!I(b)){var f=new Error("First argument to waterfall must be an array of functions");return d(f)}return b.length?void e(F.iterator(b))():d()},F.parallel=function(a,b){w(F.eachOf,a,b)},F.parallelLimit=function(a,b,c){w(n(b),a,c)},F.series=function(b,c){c=c||a;var e=d(b)?[]:{};F.eachOfSeries(b,function(a,b,c){a(function(a){var d=l(arguments,1);d.length<=1&&(d=d[0]),e[b]=d,c(a)})},function(a){c(a,e)})},F.iterator=function(a){function b(c){function d(){return a.length&&a[c].apply(null,arguments),d.next()}return d.next=function(){return c<a.length-1?b(c+1):null},d}return b(0)},F.apply=function(a){var b=l(arguments,1);return function(){return a.apply(null,b.concat(l(arguments)))}},F.concat=o(x),F.concatSeries=q(x),F.whilst=function(a,b,c){a()?b(function(d){return d?c(d):void F.whilst(a,b,c)}):c(null)},F.doWhilst=function(a,b,c){a(function(d){if(d)return c(d);var e=l(arguments,1);b.apply(null,e)?F.doWhilst(a,b,c):c(null)})},F.until=function(a,b,c){a()?c(null):b(function(d){return d?c(d):void F.until(a,b,c)})},F.doUntil=function(a,b,c){a(function(d){if(d)return c(d);var e=l(arguments,1);b.apply(null,e)?c(null):F.doUntil(a,b,c)})},F.queue=function(a,b){var c=y(function(b,c){a(b[0],c)},b,1);return c},F.priorityQueue=function(b,c){function d(a,b){return a.priority-b.priority}function e(a,b,c){for(var d=-1,e=a.length-1;e>d;){var f=d+(e-d+1>>>1);c(b,a[f])>=0?d=f:e=f-1}return d}function g(b,c,g,h){if(null!=h&&"function"!=typeof h)throw new Error("task callback must be a function");return b.started=!0,I(c)||(c=[c]),0===c.length?F.setImmediate(function(){b.drain()}):void f(c,function(c){var f={data:c,priority:g,callback:"function"==typeof h?h:a};b.tasks.splice(e(b.tasks,f,d)+1,0,f),b.tasks.length===b.concurrency&&b.saturated(),F.setImmediate(b.process)})}var h=F.queue(b,c);return h.push=function(a,b,c){g(h,a,b,c)},delete h.unshift,h},F.cargo=function(a,b){return y(a,1,b)},F.log=z("log"),F.dir=z("dir"),F.memoize=function(a,b){function c(){var c=l(arguments),f=c.pop(),g=b.apply(null,c);g in d?F.nextTick(function(){f.apply(null,d[g])}):g in e?e[g].push(f):(e[g]=[f],a.apply(null,c.concat([function(){d[g]=l(arguments);var a=e[g];delete e[g];for(var b=0,c=a.length;c>b;b++)a[b].apply(null,arguments)}])))}var d={},e={};return b=b||function(a){return a},c.memo=d,c.unmemoized=a,c},F.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},F.times=A(F.map),F.timesSeries=A(F.mapSeries),F.timesLimit=function(a,b,c,d){return F.mapLimit(h(a),b,c,d)},F.seq=function(){var b=arguments;return function(){var c=this,d=l(arguments),e=d.slice(-1)[0];"function"==typeof e?d.pop():e=a,F.reduce(b,d,function(a,b,d){b.apply(c,a.concat([function(){var a=arguments[0],b=l(arguments,1);d(a,b)}]))},function(a,b){e.apply(c,[a].concat(b))})}},F.compose=function(){return F.seq.apply(null,Array.prototype.reverse.call(arguments))},F.applyEach=function(){var a=l(arguments);return B.apply(null,[F.eachOf].concat(a))},F.applyEachSeries=function(){var a=l(arguments);return B.apply(null,[F.eachOfSeries].concat(a))},F.forever=function(c,d){function e(a){return a?f(a):void g(e)}var f=b(d||a),g=C(c);e()},F.ensureAsync=C,"undefined"!=typeof module&&module.exports?module.exports=F:"undefined"!=typeof define&&define.amd?define([],function(){return F}):D.async=F}(),function(a,b,c){"use strict";function d(a,c){if("string"!=typeof a||!(c instanceof RegExp))throw new Error("extensionName or extensionValue undefined or not correct type");if(b.validate.formats.hasOwnProperty(a)||b.validate.formats.hasOwnProperty(a)){var d="extensionName: "+a+" already exists in formatExtensions.";throw new Error(d)}b.validate.formatExtensions[a]=c}function e(a,c){return(b.validate.messages[a]||"").replace("%{expected}",c)}function f(a,b,c){return{attribute:a,expected:b,actual:c,message:e(a,b)}}function g(a){var b={valid:!0,errors:[]};return null!==a&&(b.valid=!1,b.errors.push(a)),b}function h(a){for(var b={},c=0,d=a.length;d>c;c++){var e=JSON.stringify(a[c]);if(b[e])return!1;b[e]=!0}return!0}function i(){var a={};return a.email=function(a){return g(b.validate.formats.email.test(a)?null:f("format","email",a))},a.ipAddress=function(a){return g(b.validate.formats["ip-address"].test(a)?null:f("format","ip-address",a))},a.ipv6=function(a){return g(b.validate.formats.ipv6.test(a)?null:f("format","ipv6",a))},a.dateTime=function(a){return g(b.validate.formats["date-time"].test(a)?null:f("format","date-time",a))},a.date=function(a){return g(b.validate.formats.date.test(a)?null:f("format","date",a))},a.time=function(a){return g(b.validate.formats.time.test(a)?null:f("format","time",a))},a.color=function(a){return g(b.validate.formats.color.test(a)?null:f("format","color",a))},a.hostName=function(a){return g(b.validate.formats["host-name"].test(a)?null:f("format","host-name",a))},a.utcMillisec=function(a){return g(b.validate.formats["utc-millisec"].test(a)?null:f("format","utc-millisec",a))},a.regex=function(a){return g(a instanceof RegExp?null:f("format","regex",a))},a.url=function(a){return g(b.validate.formatExtensions.url.test(a)?null:f("format","url",a))},a.mongoId=function(a){return g(b.validate.formats["mongo-id"].test(a)?null:f("format","mongoId",a))},a.uuid=function(a){return g(b.validate.formats.uuid.test(a)?null:f("format","uuid",a))},a.numberFloat=function(a){return g("string"==typeof a&&b.validate.formats["number-float"].test(a)?null:f("format","float",a))},a["float"]=function(a){return g("string"==typeof a&&b.validate.formats["float"].test(a)?null:f("format","float",a))},a.integer=function(a){return g("string"==typeof a&&b.validate.formats.integer.test(a)?null:f("format","integer",a))},a.empty=function(a){return g(b.validate.formats.empty.test(a)?null:f("format","empty",a))},a}function j(){var a,c={},d=Object.keys(b.validate.types),e=d.length;for(a=0;e>a;a++)c[d[a]]=o(d[a]);return c}function k(){var a={};return a.maxLength=function(a,b){return g(!Array.isArray(a)&&"string"!=typeof a||"number"!=typeof b?new Error("rules.maxLength(fail): value must be a string or array, max must be a number"):a.length>b?f("maxLength",b,a):null)},a.minLength=function(a,b){return g(!Array.isArray(a)&&"string"!=typeof a||"number"!=typeof b?new Error("rules.minLength(fail): value must be a string or array, min must be a number"):a.length<b?f("minLength",b,a):null)},a.minimum=function(a,b){return g("number"!=typeof a||"number"!=typeof b?new Error("rules.minimum(fail): value must be a number, min must be a number"):b>a?f("minimum",b,a):null)},a.maximum=function(a,b){return g("number"!=typeof a||"number"!=typeof b?new Error("rules.maximum(fail): value must be a number, max must be a number"):a>b?f("maximum",b,a):null)},a.exclusiveMinimum=function(a,b){return g("number"!=typeof a||"number"!=typeof b?new Error("rules.exclusiveMinimum(fail): value must be a number, min must be a number"):b>=a?f("exclusiveMinimum",b,a):null)},a.exclusiveMaximum=function(a,b){return g("number"!=typeof a||"number"!=typeof b?new Error("rules.exclusiveMaximum(fail): value must be a number, max must be a number"):a>=b?f("exclusiveMinimum",b,a):null)},a.divisibleBy=function(a,b){if("number"!=typeof a||"number"!=typeof b)return g(new Error("rules.divisibleBy(fail): value must be a number, div must be a number"));var c=Math.max((a-Math.floor(a)).toString().length-2,(b-Math.floor(b)).toString().length-2);return c=c>0?Math.pow(10,c):1,g(a*c%(b*c)!==0?f("divisibleBy",b,a):null)},a.minItems=function(a,b){return g(Array.isArray(a)&&"number"==typeof b?a.length<b?f("minItems",b,a.length):null:new Error("rules.minItems(fail): value must be a array, min must be a number"))},a.maxItems=function(a,b){return g(Array.isArray(a)&&"number"==typeof b?a.length>b?f("maxItems",b,a.length):null:new Error("rules.maxItems(fail): value must be a array, max must be a number"))},a.uniqueItems=function(a){return g(Array.isArray(a)?h(a)?null:f("uniqueItems",a,!0):new Error("rules.uniqueItems(fail): value must be a array"))},a["enum"]=function(a,b){return g("undefined"!=typeof a&&Array.isArray(b)?-1===b.indexOf(a)?f("enum",b,a):null:new Error("rules.enum(fail): value must be a defined and enum mus be a array"))},a}function l(){var a={},b=[];return a.register=function(a,c){b.push(function(b){a(c,b)})},a.exec=function(a,d){c.parallel(b,function(c,e){if(b=[],c)d(c);else{var f,g;for(f=0,g=e.length;g>f;f+=1)e[f].valid||(a.valid=!1,a.errors.push(e[f].errors[0]));d(null,a)}})},a}function m(b){return b=b||{},function(c,d,e){if(c=c||{},e=e||{},e.isUpdate=e.isUpdate||!1,e.isUpdate){var f,g=Object.keys(d.properties),h=g.length;for(f=0;h>f;f++)c.hasOwnProperty(g[f])||(d.properties[g[f]].required=!1)}for(var i in b)b.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=b[i]);return a.validate(c,d,e)}}function n(a,b){return function(c){return b[a](c).valid}}function o(a){return function(c){return g(b.validate.types[a](c)?null:f("type",a,c))}}function p(a){return"is"+a[0].toUpperCase()+a.substr(1)}a.validate=b.validate,a.mixin=b.mixin,a.extendFormat=d,a.formats=i(),a.types=j(),a.rules=k(),a.asyncValidate=l(),a.getValidationFunction=m;var q,r=Object.keys(a.types),s=r.length;for(q=0;s>q;q++)a[p(r[q])]=n(r[q],a.types)}("undefined"==typeof window?module.exports:window.lxvalid=window.lxvalid||{},"undefined"==typeof window?require("./revalidator"):window.json,"undefined"==typeof window?require("async"):window.async);
//# sourceMappingURL=lx-valid.min.js.map